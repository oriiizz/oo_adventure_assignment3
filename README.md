# 🎮 OO Adventure - 摄像头控制跳跃游戏

一个创新的摄像头控制游戏！用你的嘴巴控制角色跳跃，体验独特的游戏方式！

## ✨ 游戏特色

### 🎭 **摄像头人脸识别**
- 实时检测你的脸部
- 精确识别嘴巴开合状态
- 你的脸会显示在游戏角色上！

### 👄 **张嘴跳跃控制**
- **张大嘴巴** → 角色跳跃
- **闭上嘴巴** → 角色自动前进
- 实时显示嘴巴开合比率

### 🎨 **马里奥风格画面**
- 蓝天白云背景
- 可爱的卡通云朵（视差滚动）
- 草地平台（绿色草+棕色土壤）
- 明亮欢快的配色

### 🎵 **音乐与音效**
- 欢快的背景音乐（循环播放）
- 跳跃音效
- 游戏结束音效
- 可以开关音乐（按 M 键）

### 🎯 **游戏机制**
- 自动向前奔跑
- 无限生成的平台
- 难度递增
- 实时距离计分

## 🎮 操作说明

| 控制方式 | 功能 |
|---------|------|
| 👄 **张大嘴巴** | 跳跃 |
| **W** 键 | 切换摄像头显示 开/关 |
| **M** 键 | 切换背景音乐 开/关 |
| **R** 键 | 重新开始游戏 |
| **ESC** 键 | 退出游戏 |

## 📋 系统要求

- **Python** 3.8+
- **摄像头** (内置或外置)
- **macOS / Windows / Linux**

## 🚀 快速开始

### 1. 克隆仓库

```bash
git clone https://github.com/oriiizz/oo_adventure.git
cd oo_adventure
```

### 2. 安装依赖

```bash
pip install -r requirements.txt
```

或者使用安装脚本（macOS/Linux）：

```bash
chmod +x install_requirements.sh
./install_requirements.sh
```

### 3. 运行游戏

```bash
python jump_ball_webcam.py
```

### 4. 授予摄像头权限

首次运行时，系统会请求摄像头权限，请点击**允许**。

如果在 macOS 上遇到权限问题：
1. 打开 **系统设置** > **隐私与安全性** > **摄像头**
2. 勾选 **Python** 或 **Terminal**
3. 重新运行游戏

## 📦 依赖库

- `pygame` - 游戏引擎
- `opencv-python` - 摄像头捕捉
- `mediapipe` - 人脸检测
- `numpy` - 数据处理

## 🎯 游戏目标

尽可能跑得更远！挑战你的最高距离记录。

## 🎨 游戏画面

- ☁️ **天空** - 明亮的天空蓝
- ☁️ **云朵** - 白色卡通云朵，视差滚动
- 🌱 **平台** - 绿色草地 + 棕色土壤
- 👤 **角色** - 你的真实脸部（圆形显示）

## 🔧 技术实现

- **人脸检测**: MediaPipe Face Mesh
- **嘴巴识别**: 基于关键点距离计算
- **音频合成**: 程序化生成音效
- **视差滚动**: 多层背景效果
- **实时渲染**: 60 FPS 游戏循环

## 📝 文件说明

- `jump_ball_webcam.py` - 摄像头控制版本游戏（主文件）
- `test_camera.py` - 摄像头测试工具
- `requirements.txt` - Python 依赖列表
- `install_requirements.sh` - 自动安装脚本

## 🎮 游戏提示

1. **保持脸部在摄像头视野内**
2. **确保光线充足**以获得更好的检测效果
3. **调整嘴巴张开幅度**来控制跳跃
4. **右上角显示摄像头画面**，可以看到实时检测效果
5. **观察嘴巴状态指示器**（红色=闭合，金色=张开）

## 🔧 自定义设置

在代码中可以调整的参数：

### 跳跃灵敏度
```python
# jump_ball_webcam.py 第 65 行
self.mouth_open = ratio > 0.35  # 调整阈值（0.2-0.5）
```

### 游戏速度
```python
# Player.reset() 方法
self.speed = 4  # 移动速度
self.jump_power = -11  # 跳跃力度
```

### 平台难度
```python
# Game.add_easy_platform() 方法
gap = random.randint(40, 120)  # 平台间隙
width = random.randint(200, 350)  # 平台宽度
```

### 音乐音量
```python
# SoundGenerator.__init__() 方法
self.music_volume = 0.3  # 背景音乐音量
self.sfx_volume = 0.5  # 音效音量
```

## 🐛 常见问题

### Q: 摄像头无法打开？
A: 检查摄像头权限设置，确保 Python 有访问权限。

### Q: 检测不到脸部？
A: 确保光线充足，脸部完整在摄像头视野内。

### Q: 跳跃太灵敏/不灵敏？
A: 调整代码中的 `mouth_open` 阈值（0.35）。

### Q: 没有声音？
A: 检查系统音量，确保 pygame.mixer 正常初始化。

## 🤝 贡献

欢迎提交 Issue 和 Pull Request！

## 📄 许可证

MIT License

## 🎉 更新日志

### v2.0 - 摄像头版本
- ✨ 添加摄像头人脸识别
- 👄 嘴巴控制跳跃
- 🎨 马里奥风格背景
- 🎵 背景音乐和音效
- 👤 实时脸部显示

### v1.0 - 精灵图版本
- 🎮 基础平台跳跃游戏
- 🏃 精灵图动画角色
- ⌨️ 键盘控制

---

**享受游戏！张大嘴巴，尽情跳跃吧！** 😄👄🎮

如果你喜欢这个项目，请给个 ⭐️
